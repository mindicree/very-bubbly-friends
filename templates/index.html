<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIKROVIOZOIC</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dist/app.css') }}">
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js" integrity="sha384-Gr6Lu2Ajx28mzwyVR8CFkULdCU7kMlZ9UthllibdOSo6qAiN+yXNHqtgdTvFXMT4" crossorigin="anonymous"></script>

    <!-- Fog Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@0.5.24/dist/vanta.fog.min.js"></script>
</head>
<body>
    <div x-data="game" class="flex flex-col w-full min-h-screen bg-gradient-to-b from-red-950 to-slate-950 text-white font-virus">
        <div class="absolute top-0 left-0 bg-cover bg-center w-full h-screen opacity-0 transition ease-in-out duration-[5000ms]" :class="{ 'opacity-10': true, 'opacity-0': false }" style="background-image: url('{{ url_for('static', filename='img/virus.webp') }}');">
        </div>
        <div id="fog" class="w-full min-h-screen absolute top-0 left-0 opacity-40"></div>
        <div class="scene" x-bind:class="isCurrentScene('loading') ? 'scene-active' : 'scene-inactive'">
            <span class="m-auto">Loading...</h1>
        </div>
        <div class="scene" x-bind:class="isCurrentScene('home') ? 'scene-active' : 'scene-inactive'">
            <div class="flex flex-col gap-8 justify-end h-1/2 m-auto">
                <div class="flex flex-col m-auto gap-6 lg:gap-8">
                    <h1 class="m-auto text-4xl md:text-6xl lg:text-8xl text-shadow" style="text-shadow: 0.5rem 0.5rem 1rem black;">HELLO WORLD!</h1>
                    <h2 class="m-auto text-2xl md:text-4xl text-center max-w-screen-sm" style="text-shadow: 0.5rem 0.5rem 1rem black;" x-text="`Iozoic Engine Successfully Created`"></h2>
                </div>
                <div class="flex flex-col gap-4 m-auto w-full">
                    <button @click="startGameProcedure()" class="w-48 py-3 my-1 text-lg bg-red-700 rounded hover:bg-red-500 transition ease-in-out duration-100 m-auto hover:text-xl">Start</button>
                    <button @click="$refs.modalHowToPlay.showModal()" class="w-40 py-1 bg-red-700 rounded hover:bg-red-500 transition ease-in-out duration-100 m-auto">How To Play</button>
                    <button @click="$refs.modalCredits.showModal()" class="w-40 py-1 bg-red-700 rounded hover:bg-red-500 transition ease-in-out duration-100 m-auto">Credit</button>
                    <button @click="in_game = true; setCurrentScene('test-map')" class="w-40 py-1 bg-red-700 rounded hover:bg-red-500 transition ease-in-out duration-100 m-auto">Big View</button>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <dialog class="w-11/12 max-w-screen-md rounded-lg bg-zinc-900" x-ref="modalCredits">
            <div class="flex text-white">
                <div class="flex flex-col px-8 py-6 w-full h-full gap-2 md:gap-3">
                    <div class="flex flex-row justify-between w-full">
                        <h4 class="bold text-2xl md:text-4xl text-red-600">How To Play</h4>
                        <button x-on:click="$refs.modalCredits.close()" class="opacity-50 lg:hover:opacity-100">
                            <span class="custom-font bold text-2xl md:text-4xl opacity-50 lg:hover:opacity-100 transition ease-in-out duration-100">
                                X
                            </span>
                        </button>
                    </div>
                    <hr>
                    <div class="min-h-[50hv] h-[10000px] max-h-[75vh] md:max-h-[55vh]">
                        <div class="flex flex-col gap-4 relative h-full">
                            <p class="text-base md:text-xl">
                                Concept and Design: Tyler Johnson
                            </p>
                            <p class="text-base md:text-xl">
                                Programming: Tyler Johnson
                            </p>
                            <p class="text-base md:text-xl">
                                Music and SFX: Tyler Johnson
                            </p>
                            <p class="absolute bottom-0 text-base md:text-xl">
                                Special Thanks to 49er Game Jam
                            </p>
                        </div>
                    </div>
                    <hr>
                    <div class="w-full flex flex-row justify-between m-auto">
                        <div></div>
                        <button x-on:click="$refs.modalCredits.close()" class="custom-font text-2xl text-white opacity-75 lg:hover:opacity-100 lg:hover:scale-105 lg:hover:text-red-600 hover-text-shadow transition ease-in-out duration-200">Close</button>
                    </div>
                </div>
            </div>
        </dialog>
    </div>

    
    <script src="{{ url_for('static', filename='dist/app.js') }}"></script>
    
    <!-- Fog Script -->
    <script>
        VANTA.FOG({
          el: "#fog",
          mouseControls: true,
          touchControls: true,
          gyroControls: false,
          minHeight: 200.00,
          minWidth: 200.00,
          highlightColor: 0x864646,
          midtoneColor: 0x804040,
          lowlightColor: 0x0,
          baseColor: 0x0,
          blurFactor: 0.65,
          speed: 1.25
        })
    </script>
</body>
</html>
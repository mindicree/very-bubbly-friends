<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Very Bubbly Friends!</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='dist/app.css') }}">
    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js" integrity="sha384-Gr6Lu2Ajx28mzwyVR8CFkULdCU7kMlZ9UthllibdOSo6qAiN+yXNHqtgdTvFXMT4" crossorigin="anonymous"></script>

    <!-- Fog Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanta@0.5.24/dist/vanta.fog.min.js"></script>
</head>
<body>
    <div x-data="game" class="flex flex-col w-full min-h-screen bg-gradient-to-b from-cyan-300 to-pink-400 text-white font-bubble">
        <!-- BACKGROUND IMAGE -->
        <!-- <div class="absolute top-0 left-0 bg-cover bg-center w-full h-screen opacity-0 transition ease-in-out duration-[5000ms]" :class="{ 'opacity-10': true, 'opacity-0': false }" style="background-image: url('{{ url_for('static', filename='img/virus.webp') }}');"></div> -->
        <!-- <div class="absolute top-0 left-0 bg-cover bg-center w-full h-screen opacity-0 transition ease-in-out duration-[5000ms]" :class="{ 'opacity-10': true, 'opacity-0': false }" style="background-image: url('https://images.unsplash.com/photo-1597553161987-5993dc9da24e?q=80&w=2070&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');"></div> -->
        <!-- BUBBLES FROM DREW BEAMER https://unsplash.com/photos/green-blue-and-pink-bubbles-Hk6E4UxjmGo -->
        <div class="absolute top-0 left-0 bg-cover bg-center w-full h-screen opacity-0 transition ease-in-out duration-[5000ms]" :class="{ 'opacity-5': true, 'opacity-0': false }" style="background-image: url('https://images.unsplash.com/photo-1594035519981-62c9cef33ca9?q=80&w=2071&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');"></div>
        <!-- FOG -->
        <!-- <div id="fog" class="w-full min-h-screen absolute top-0 left-0 opacity-40"></div> -->
        <div class="scene" x-bind:class="isCurrentScene('loading') ? 'scene-active' : 'scene-inactive'">
            <span class="m-auto">Loading...</h1>
        </div>
        <!-- HOME SCENE -->
        <div class="scene" x-bind:class="isCurrentScene('home') ? 'scene-active' : 'scene-inactive'">
            <div class="flex flex-col gap-12 justify-end h-1/2 m-auto">
                <div class="flex flex-col m-auto gap-6 md:gap-8">
                    <h1 class="m-auto text-3xl md:text-6xl text-shadow text-center" style="text-shadow: 0.5rem 0.5rem 1rem black;">Very Bubbly Friends!</h1>
                    <h2 class="m-auto text-xl md:text-2xl text-center max-w-screen-sm" style="text-shadow: 0.5rem 0.5rem 1rem black;">The Bubbliest Trivia Game Around!</h2>
                </div>
                <div class="flex flex-col gap-4 m-auto w-full">
                    <div class="flex flex-col md:flex-row gap-4 m-auto w-full md:py-4">
                        <button @click="$refs.modalJoinGame.showModal()" class="md:text-4xl md:p-6">Join</button>
                        <span class="hidden md:inline my-auto text-4xl">OR</span>
                        <button @click="$refs.modalCreateGame.showModal()" class="md:text-4xl md:p-6">Create</button>
                    </div>
                    <button @click="$refs.modalHowToPlay.showModal()">How To Play</button>
                    <button @click="$refs.modalCredits.showModal()">Credit</button>
                </div>
            </div>
        </div>

        <!-- Modals -->
        <dialog x-ref="modalJoinGame" class="max-w-screen-sm">
            <div class="flex text-white">
                <div class="flex flex-col p-6 w-full h-full gap-2 md:gap-3">
                    <div class="flex flex-row justify-between w-full">
                        <h4 class="bold text-xl md:text-4xl my-auto">Hi Bubble Buddy!</h4>
                        <button x-on:click="$refs.modalJoinGame.close()" class="rounded-full bg-none lg:opacity-50 lg:hover:opacity-100 min-w-0 w-12 h-12 mr-0 text-lg">
                            X
                        </button>
                    </div>
                    <hr>
                    <div class="min-h-[50hv] h-[10000px] max-h-[65vh] md:h-fit md:max-h-[55vh] overflow-y-scroll md:overflow-y-auto">
                        <form id="newPlayerForm" class="flex flex-col gap-4 relative w-full">
                            <div class="flex flex-col gap-2 w-full">
                                <label for="new-player-name" class="my-auto">Name</label>
                                <div class="w-full flex flex-row gap-4">
                                    <input id="new-player-name" x-model="player.name" maxlength="32" class="w-full" x-bind:disabled="loading">
                                </div>
                            </div>
                        </form>
                    </div>
                    <hr>
                    <div class="w-full flex flex-row justify-between m-auto">
                        <div></div>
                        <button x-on:click="">Games</button>
                    </div>
                </div>
            </div>
        </dialog>

        <dialog x-ref="modalCreateGame">
            <div class="flex text-white">
                <div class="flex flex-col p-6 w-full h-full gap-2 md:gap-3">
                    <div class="flex flex-row justify-between w-full">
                        <h4 class="bold text-xl md:text-4xl my-auto">New Game</h4>
                        <button x-on:click="$refs.modalCreateGame.close()" class="rounded-full bg-none lg:opacity-50 lg:hover:opacity-100 min-w-0 w-12 h-12 mr-0 text-lg my-auto">
                            X
                        </button>
                    </div>
                    <hr>
                    <div class="min-h-[50hv] h-[10000px] max-h-[60vh] md:max-h-[55vh]">
                        <form id="newGameForm" class="flex flex-col gap-4 relative h-full">
                            <div class="flex flex-col md:flex-row w-full justify-between">
                                <label for="new-game-name" class="my-auto">Room Name</label>
                                <div class="w-full md:w-1/2 flex flex-row gap-4">
                                    <input id="new-game-name" x-model="newGame.name" maxlength="32" class="w-full" x-bind:disabled="loading">
                                </div>
                            </div>
                            <div class="flex flex-col md:flex-row w-full justify-between">
                                <label for="new-game-password" class="my-auto">Room Password</label>
                                <div class="w-full md:w-1/2 flex flex-row gap-4">
                                    <input id="new-game-password" x-model="newGame.password" type="password" class="w-full" x-bind:disabled="loading">
                                </div>
                            </div>
                            <div class="flex flex-col md:flex-row w-full justify-between">
                                <label for="new-game-rounds" class="my-auto">Rounds</label>
                                <div class="w-full md:w-1/2 flex flex-row gap-4">
                                    <input id="new-game-rounds" x-model="newGame.rounds" type="range" min="1" max="10" step="1" class="my-auto w-full" x-bind:disabled="loading">
                                    <output for="new-game-rounds" x-text="pad(newGame.rounds)" class="my-auto"></output>
                                </div>
                            </div>
                            <div class="flex flex-col md:flex-row w-full justify-between">
                                <label for="new-game-round_duration" class="my-auto">Round Duration (s)</label>
                                <div class="w-full md:w-1/2 flex flex-row gap-4">
                                    <input id="new-game-round_duration" x-model="newGame.round_duration" type="range" min="60" max="300" step="10" class="my-auto w-full" x-bind:disabled="loading">
                                    <output x-text="pad(newGame.round_duration)" class="my-auto"></output>
                                </div>
                            </div>
                            <div class="flex flex-col md:flex-row w-full justify-between">
                                <label class="my-auto">Max Players</label>
                                <div class="w-full md:w-1/2 flex flex-row gap-4">
                                    <input id="new-game-max_players" x-model="newGame.max_players" type="range" min="5" max="50" step="5" class="my-auto w-full" x-bind:disabled="loading">
                                    <output x-text="pad(newGame.max_players)" class="my-auto"></output>
                                </div>
                            </div>
                        </form>
                    </div>
                    <hr>
                    <div class="w-full flex flex-row justify-between m-auto">
                        <div></div>
                        <button x-bind:disabled="loading">Create</button>
                    </div>
                </div>
            </div>
        </dialog>

        <dialog x-ref="modalHowToPlay">
            <div class="flex text-white">
                <div class="flex flex-col p-6 w-full h-full gap-2 md:gap-3">
                    <div class="flex flex-row justify-between w-full">
                        <h4 class="bold text-xl md:text-4xl my-auto">How To Play</h4>
                        <button x-on:click="$refs.modalHowToPlay.close()" class="rounded-full bg-none lg:opacity-50 lg:hover:opacity-100 min-w-0 w-12 h-12 mr-0 text-lg">
                            X
                        </button>
                    </div>
                    <hr>
                    <div class="min-h-[50hv] h-[10000px] max-h-[65vh] md:h-fit md:max-h-[55vh] overflow-y-scroll md:overflow-y-auto">
                        <div class="flex flex-col gap-4 relative h-full">
                            <p class="text-base md:text-lg">
                                Hi bubble buddie! Welcome to Very Bubbly Friends! This is a trivia game where players pop bubbles to get questions and compete with others to get the most points.
                            </p>
                            <p class="text-base md:text-lg">
                                Create a game with a device everyone can see, or join a game on any device. When the bubbles come, map your tapping on your device to the bubbles on the screen. When you hit a bubble, a question will come on your device. The bigger the bubble, the harder the question, but the more points you earn! 
                            </p>
                            <p class="text-base md:text-lg">
                                Answer correctly, and you earn points based on the difficuly, but be careful; getting a question wrong will make you lose a point.
                            </p>
                            <p class="text-base md:text-lg">
                                The player with the most points at the end of the game wins!
                            </p>
                        </div>
                    </div>
                    <hr>
                    <div class="w-full flex flex-row justify-between m-auto">
                        <div></div>
                        <button x-on:click="$refs.modalHowToPlay.close()">Close</button>
                    </div>
                </div>
            </div>
        </dialog>

        <dialog x-ref="modalCredits">
            <div class="flex text-white">
                <div class="flex flex-col p-6 w-full h-full gap-2 md:gap-3">
                    <div class="flex flex-row justify-between w-full">
                        <h4 class="bold text-xl md:text-4xl my-auto">Credits</h4>
                        <button x-on:click="$refs.modalCredits.close()" class="rounded-full bg-none lg:opacity-50 lg:hover:opacity-100 min-w-0 w-12 h-12 mr-0 text-lg">
                            X
                        </button>
                    </div>
                    <hr>
                    <div class="min-h-[50hv] h-[10000px] max-h-[60vh] md:max-h-[55vh]">
                        <div class="flex flex-col gap-4 relative h-full">
                            <p class="text-base md:text-xl">
                                Concept and Design: Tyler Johnson
                            </p>
                            <p class="text-base md:text-xl">
                                Programming: Tyler Johnson
                            </p>
                            <p class="text-base md:text-xl">
                                Music and SFX: Tyler Johnson
                            </p>
                            <p class="absolute bottom-0 text-base md:text-xl">
                                Special Thanks to Global Game Jam 2025
                            </p>
                        </div>
                    </div>
                    <hr>
                    <div class="w-full flex flex-row justify-between m-auto">
                        <div></div>
                        <button x-on:click="$refs.modalCredits.close()">Close</button>
                    </div>
                </div>
            </div>
        </dialog>
    </div>

    
    <script src="{{ url_for('static', filename='dist/app.js') }}"></script>
</body>
</html>